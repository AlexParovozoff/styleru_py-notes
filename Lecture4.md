# Лекция четвертая
Все слайды [тут](http://melevir.com/static/styleru_py/slides/4.html?full#cover).
### Тестирование
[Слайд 3](http://melevir.com/static/styleru_py/slides/4.html?full#3):
- Если ПО не тестирует программист, его тестируют пользователи. И страдают.

[Слайд 4](http://melevir.com/static/styleru_py/slides/4.html?full#4):
- Если программист пострадает над тестированием чуть-чуть, он сильно уменьшит страдания пользователей. 

[Слайды 5-6](http://melevir.com/static/styleru_py/slides/4.html?full#5):
- Тестирование бывает разным, но о конкретных терминах для разных видов тестирования программисты между собой не договорились.

[Слайд 7](http://melevir.com/static/styleru_py/slides/4.html?full#7):
- У Google разделение самое простое.
- Хотя конечно «малые» — это юнит-тесты, «средние» — интеграционные и «большие» — приемочные.

[Слайд 9](http://melevir.com/static/styleru_py/slides/4.html?full#9):
- Малых тестов должно быть примерно 70% от общего количества тестов, средних — 20, больших — 10.
- Это согласуется с тем, что говорится о количестве юнит-, интеграционных и приемочных тестов.

[Слайды 10-11](http://melevir.com/static/styleru_py/slides/4.html?full#10):
- Модулей для тестирования много.
- В pytest есть много полезных фишек, он крутой и популярный.
- Еще популярен unittest, он простой, поставляется вместе с интерпретатором и для целей курса достаточно использовать его.

[Слайды 14-21](http://melevir.com/static/styleru_py/slides/4.html?full#14):
- Создается класс, который наследует от ```unittest.TestCase```.
- Каждый его метод — отдельный тест. Вернее, каждый метод, начинающийся с префикса ```test_``` (это важно).
- Чтобы проверить полученное в результате исполнения значение, используются функции вида ```unittest.assert*```.
- Все это запускается в блоке ```if __name__ == '__main__'``` с вызовом ```unittest.main()```.
- На этом слайде тестируется функция как с корректными входными данными, так и некорректными.

[Слайд 23](http://melevir.com/static/styleru_py/slides/4.html?full#23):
- В unittest есть assert-ы на все случаи жизни.
- Даже можно проверить, кидает ли метод исключение.
- Подробности — в документации.

[Слайд 24](http://melevir.com/static/styleru_py/slides/4.html?full#24):
- Атомарный — значит, проверяет что-то одно. Если совсем строго — один assert на один тест (но это совсем).
- Небольшой — если в маленьком тесте много строк, то он скорее всего не маленький в понимании Google.
- Изолированный — не ходит в базу данных, интернет и подобное.
- Независимый — значит, не зависит от других тестов. 

[Слайд 25](http://melevir.com/static/styleru_py/slides/4.html?full#25):
- Строки, покрытые тестом — это те строки, которые были проинтерпретированы («запущены») во время исполнения конкретного теста.
- 100% покрытия тестами добиться трудно. 
- 100% покрытие тестами не гарантирует, что ваш код без багов.

[Слайд 26](http://melevir.com/static/styleru_py/slides/4.html?full#26):
- Уверенность: тесты дают уверенность в собственном коде.
- Снижение плотности дефектов: как ни крути, увеличение покрытия тестами коррелирует со снижением количества багов.
- Смелость: если есть большой непонятный кусок кода, то менять в нем что-то обычно боятся. Но если к нему написан набор тестов, то после изменений всегда можно убедиться, что код работает так же, как предполагалось.
- Документация: в том же большом непонятном покрытом тестами куске кода можно разобраться, почитав к нему тесты. В них видно, как код реагирует на разные входные данные.
- Архитектура: бывает, что к функции трудно написать маленький тест. Это хороший знак, что функцию стоит разбить на несколько. В более общем случае, хорошие тесты снижают связность кода.

> ####Из рассылки Ильи: 
> В прошлый раз обсуждали тесты, поэтому я собрал несколько интро-статей про юниттесты в Питоне. Если у тебя нет проблем с английским, то за час-полтора можно осилить все три и пару вечеров потратить на эксперименты.
> Статьи:
> - [Improve Your Python: Understanding Unit Testing](https://jeffknupp.com/blog/2013/12/09/improve-your-python-understanding-unit-testing/), статья в блоге Джефа Крупа. Я его не знаю, но блог у него классный. Советую почитать другие статьи.
> - [Testing Your Code](http://docs.python-guide.org/en/latest/writing/tests/), глава из "Автостопом по Питону". Весь туториал очень крутой.
> - [Python Unit Testing Tutorial](https://cgoldberg.github.io/python-unittest-tutorial/), статья про то, как начать жить с юниттестом.
