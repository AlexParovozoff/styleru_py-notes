# Лекция четвертая
Все слайды [тут](http://melevir.com/static/styleru_py/slides/4.html?full#cover).
### Тестирование
[Слайд 3](http://melevir.com/static/styleru_py/slides/4.html?full#3):
- Если ПО не тестирует программист, его тестируют пользователи. И страдают.

[Слайд 4](http://melevir.com/static/styleru_py/slides/4.html?full#4):
- Если программист пострадает над тестированием чуть-чуть, он сильно уменьшит страдания пользователей. 

[Слайды 5-6](http://melevir.com/static/styleru_py/slides/4.html?full#5):
- Тестирование бывает разным, но о конкретных терминах для разных видов тестирования программисты между собой не договорились.

[Слайд 7](http://melevir.com/static/styleru_py/slides/4.html?full#7):
- У Google разделение самое простое.
- Хотя конечно «малые» — это юнит-тесты, «средние» — интеграционные и «большие» — приемочные.

[Слайд 9](http://melevir.com/static/styleru_py/slides/4.html?full#9):
- Малых тестов должно быть примерно 70% от общего количества тестов, средних — 20, больших — 10.
- Это согласуется с тем, что говорится о количестве юнит-, интеграционных и приемочных тестов.

[Слайды 10-11](http://melevir.com/static/styleru_py/slides/4.html?full#10):
- Модулей для тестирования много.
- В pytest есть много полезных фишек, он крутой и популярный.
- Еще популярен unittest, он простой, поставляется вместе с интерпретатором и для целей курса достаточно использовать его.

[Слайды 14-21](http://melevir.com/static/styleru_py/slides/4.html?full#14):
- Создается класс, который наследует от ```unittest.TestCase```.
- Каждый его метод — отдельный тест. Вернее, каждый метод, начинающийся с префикса ```test_``` (это важно).
- Чтобы проверить полученное в результате исполнения значение, используются функции вида ```unittest.assert*```.
- Все это запускается в блоке ```if __name__ == '__main__'``` с вызовом ```unittest.main()```.
- На этом слайде тестируется функция как с корректными входными данными, так и некорректными.

[Слайд 23](http://melevir.com/static/styleru_py/slides/4.html?full#23):
- В unittest есть assert-ы на все случаи жизни.
- Даже можно проверить, кидает ли метод исключение.
- Подробности — в документации.

[Слайд 24](http://melevir.com/static/styleru_py/slides/4.html?full#24):
- Атомарный — значит, проверяет что-то одно. Если совсем строго — один assert на один тест (но это совсем).
- Небольшой — если в маленьком тесте много строк, то он скорее всего не маленький в понимании Google.
- Изолированный — не ходит в базу данных, интернет и подобное.
- Независимый — значит, не зависит от других тестов. 

[Слайд 25](http://melevir.com/static/styleru_py/slides/4.html?full#25):
- Строки, покрытые тестом — это те строки, которые были проинтерпретированы («запущены») во время исполнения конкретного теста.
- 100% покрытия тестами добиться трудно. 
- 100% покрытие тестами не гарантирует, что ваш код без багов.

[Слайд 26](http://melevir.com/static/styleru_py/slides/4.html?full#26):
- Уверенность: тесты дают уверенность в собственном коде.
- Снижение плотности дефектов: как ни крути, увеличение покрытия тестами коррелирует со снижением количества багов.
- Смелость: если есть большой непонятный кусок кода, то менять в нем что-то обычно боятся. Но если к нему написан набор тестов, то после изменений всегда можно убедиться, что код работает так же, как предполагалось.
- Документация: в том же большом непонятном покрытом тестами куске кода можно разобраться, почитав к нему тесты. В них видно, как код реагирует на разные входные данные.
- Архитектура: бывает, что к функции трудно написать маленький тест. Это хороший знак, что функцию стоит разбить на несколько. В более общем случае, хорошие тесты снижают связность кода.

> #### Из рассылки Ильи: 
> В прошлый раз обсуждали тесты, поэтому я собрал несколько интро-статей про юниттесты в Питоне. Если у тебя нет проблем с английским, то за час-полтора можно осилить все три и пару вечеров потратить на эксперименты.
> Статьи:
> - [Improve Your Python: Understanding Unit Testing](https://jeffknupp.com/blog/2013/12/09/improve-your-python-understanding-unit-testing/), статья в блоге Джефа Крупа. Я его не знаю, но блог у него классный. Советую почитать другие статьи.
> - [Testing Your Code](http://docs.python-guide.org/en/latest/writing/tests/), глава из "Автостопом по Питону". Весь туториал очень крутой.
> - [Python Unit Testing Tutorial](https://cgoldberg.github.io/python-unittest-tutorial/), статья про то, как начать жить с юниттестом.

### Гит
[Слайд 28](http://melevir.com/static/styleru_py/slides/4.html?full#28):
- Часть про сообщения к коммитам была перенесена на следующую лекцию.

[Слайд 34](http://melevir.com/static/styleru_py/slides/4.html?full#34):
- Быстрый и маленький: Git отслеживает изменения у файлов, а не хранит их копии.
- Распределенность: у каждого разработчика своя версия репозитория (подробнее [здесь](https://git-scm.com/book/it/v2/Distributed-Git-Distributed-Workflows)).
- Во многих системах контроля версий сделать новую ветку — это процесс нескольких минут. Git создает и удаляет многие ветки мгновенно.

[Слайд 35](http://melevir.com/static/styleru_py/slides/4.html?full#35):
- Хранятся Git-репозитории на GitHub, BitBucket и GitLab. 
- Для сдачи домашнего задания мы используем GitHub.

[Слайд 36](http://melevir.com/static/styleru_py/slides/4.html?full#36):
- ```git clone``` копирует весь репозиторий в папку с соответствующим названием (или произвольно заданным).

[Слайд 41](http://melevir.com/static/styleru_py/slides/4.html?full#41):
- Если написать ```git commit```, откроется текстовый редактор, где понадобится написать сообщение к коммиту. 

[Слайд 42](http://melevir.com/static/styleru_py/slides/4.html?full#42):
- А если написать ```git commit -m```, текстовый редактор не откроется, и переданная строка будет заголовком к коммиту.

[Слайд 45](http://melevir.com/static/styleru_py/slides/4.html?full#45):
- ```origin``` — это ваш удаленный репозиторий. Обычно его устанавливают вручную командой ```git remote set-url origin <link>``` ([подробнее](https://help.github.com/articles/changing-a-remote-s-url/)), но если вы использовали ```git clone```, ```origin``` у вас уже установлен правильно.
- ```development``` — это название ветки, в которую пушатся изменения. Если ветки в удаленном репозитории нет, она появится.

[Слайд 52](http://melevir.com/static/styleru_py/slides/4.html?full#52):
- У проектов обычно много веток. Вообще, в Git их активно используют.

[Слайд 55](http://melevir.com/static/styleru_py/slides/4.html?full#55):
- Бывает так, что нужно срочно переключиться на другую ветку (например, чтобы быстро что-то починить).
- Нельзя переключиться на другую ветку, не закоммитив изменения.
- Здесь помогает команда ```git stash```.

[Слайд 56](http://melevir.com/static/styleru_py/slides/4.html?full#56):
- Чтобы слить свою ветку с той, к которой у вас нет доступа, используют пулл-реквесты.

### Софтскиллы: цель
[Слайды 60-61](http://melevir.com/static/styleru_py/slides/4.html?full#60):
- В зависимости от цели, на ситуацию можно реагировать по-разному.
